{% extends 'qa_app/base.html' %}
{% load static %}

{% block title %}{% if object.pk %}Редактировать запись{% else %}Новая запись{% endif %}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h4>
            {% if object.pk %}
                <i class="fas fa-edit me-2 text-warning"></i> Редактирование записи
            {% else %}
                <i class="fas fa-sticky-note me-2 text-success"></i> Новая запись для задачи
            {% endif %}
        </h4>
    </div>
    <div class="card-body">
        <form method="post" class="row g-3">
            {% csrf_token %}

            <!-- Заголовок -->
            <div class="col-12">
                <label for="{{ form.title.id_for_label }}" class="form-label fw-bold">
                    Заголовок записи (необязательно)
                </label>
                {{ form.title }}
                {% if form.title.errors %}
                    <div class="text-danger mt-1">{{ form.title.errors }}</div>
                {% endif %}
            </div>

            <!-- Содержание -->
            <div class="col-12">
                <label for="{{ form.content.id_for_label }}" class="form-label fw-bold">
                    Содержание
                </label>
                {{ form.content }}
                {% if form.content.errors %}
                    <div class="text-danger mt-1">{{ form.content.errors }}</div>
                {% endif %}
                <div class="form-text">
                    Поддерживается форматирование. Можно использовать HTML.
                </div>
            </div>

            <!-- Порядок -->
            <div class="col-md-6">
                <label for="{{ form.order.id_for_label }}" class="form-label fw-bold">
                    Порядок отображения
                </label>
                {{ form.order }}
                {% if form.order.errors %}
                    <div class="text-danger mt-1">{{ form.order.errors }}</div>
                {% endif %}
                <div class="form-text">
                    Чем меньше число — тем выше запись.
                </div>
            </div>

            <!-- Кнопки -->
            <div class="col-12 mt-4">
                <button type="submit" class="btn btn-primary px-4">
                    {% if object.pk %}<i class="fas fa-save me-1"></i> Сохранить запись{% else %}<i class="fas fa-plus me-1"></i> Добавить запись{% endif %}
                </button>
                {% if task and task.pk %}
                    <a href="{% url 'qa_app:task_detail' pk=task.pk %}" class="btn btn-secondary ms-2">
                        <i class="fas fa-times me-1"></i> Отмена
                    </a>
                {% else %}
                    <a href="{% url 'qa_app:task_list' %}" class="btn btn-secondary ms-2">
                        <i class="fas fa-times me-1"></i> Отмена
                    </a>
                {% endif %}
            </div>
        </form>
    </div>
</div>
{% endblock %}